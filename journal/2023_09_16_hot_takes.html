<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hot Takes (Sept 2023) - Denim</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../journal/index.html"><strong aria-hidden="true">2.</strong> Journal</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../journal/2024_08_07_redesign.html"><strong aria-hidden="true">2.1.</strong> Redesign (Aug 2024)</a></li><li class="chapter-item expanded "><a href="../journal/2023_09_16_hot_takes.html" class="active"><strong aria-hidden="true">2.2.</strong> Hot Takes (Sept 2023)</a></li><li class="chapter-item expanded "><a href="../journal/2022_06_08_tour.html"><strong aria-hidden="true">2.3.</strong> Tour (June 2022)</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Denim</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="denims-language-design-takes"><a class="header" href="#denims-language-design-takes">Denim's Language Design Takes</a></h1>
<p>Programming language design opinions sorted more or less from hottest (most
unique/surprising) to coldest (Least unique/surprising).</p>
<h2 id="hot-takes"><a class="header" href="#hot-takes">Hot Takes</a></h2>
<h3 id="concurrency"><a class="header" href="#concurrency">Concurrency</a></h3>
<p>In a typical concurrency regime, like <code>async/await</code>, programs can "opt in" to
asynchrony in specific spots. Additionally, special functionality like
<code>Promise.all(...)</code> is necessary to express the idea that an operation should
wait for multiple prior operations to complete before it can begin.</p>
<p>Denim takes a very different approach: in Denim, concurrency is a first-class
syntactic concern.</p>
<p>Firstly, all operations in Denim are "awaited" automatically. When you don't
need to wait for something to complete, you can let in complete without blocking
using the <code>async</code> keyword.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>quick_operation_1();

// We wait for `quick_operation_1` to complete before starting
// `quick_operation_2` without having to use a keyword - just works.
quick_operation_2();

let eventual_value = super_slow_operation().async;
thing_that_needs_to_happen_right_away();

print("it's ready now: ${eventual_value.await}");
<span class="boring">}</span></code></pre></pre>
<p>Secondly, and perhaps most importantly, Denim allows the programmer to
ergonomically stipulate which things should happen at the same time, and which
should happen in sequence.</p>
<p>Statements separated a blank line are executed in sequence.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let greeting = "hello";

// Performs a network call to figure out what planet we are on.
let planet = get_current_planet();

// Waits for a 3 second time to elapse.
wait_for_3_seconds();

// Nothing is printed to the screen until 3 seconds **after** `planet` is
// fetched.
print("$greeting, $planet!");
<span class="boring">}</span></code></pre></pre>
<p>Statements <strong>not</strong> separated by a blank line are executed concurrently.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let greeting = "hello";
let planet = get_current_planet();
wait_for_3_seconds();

// We print the moment all 3 of the statements in the previous group complete.
print("$greeting, $planet!");
<span class="boring">}</span></code></pre></pre>
<p>The result is a terse yet readable way to sequence asynchronous logic.</p>
<h3 id="fluency"><a class="header" href="#fluency">Fluency</a></h3>
<p>In many lanuages, lots of the good stuff is only usable when invoking a function
as a member of a thing. Take for instance <code>?.</code> in JavaScript.</p>
<pre><code class="language-ts">const foo = Math.random() &gt; 0.5 ? { bar() {} } : null;

foo?.doSomethingMaybe(); // this is dope

function baz(foo) {
  // ...
}

// I need this grossness to **safely** call `foo`:
if (foo) {
  baz(foo);
}
</code></pre>
<p>This seems silly. <code>?.</code> is one example of the fact that we humans love to create
sequential, causal chains of things to do. Breaking these chains with control
flow like <code>if</code> does not feel good.</p>
<p>Denim is designed to make "chaining" operations as ergonomic. In a sense, Denim
takes Rust's <code>.await</code> syntactic concept to its logical conclusion: let's make
everything that can be used as a "prefix" usable as a "suffix".</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn baz(foo: Foo, scalar = 1.0) -&gt; double {
  // ...
  scalar * 123
}

foo.baz(foo: it, scalar: 2.0).if it &lt; 200 {
  print("it is $it!")
}
<span class="boring">}</span></code></pre></pre>
<p>Denim accomplishes a language feature called "fluency" by:</p>
<ul>
<li>Allowing control flow keywords to be suffixed like <code>.try</code> and <code>.if</code></li>
<li>Supporting the <code>it</code> keyword which is the value of the preceding expression in
the "chain"</li>
</ul>
<h3 id="dsl-ability"><a class="header" href="#dsl-ability">"DSL"-ability</a></h3>
<p>Denim is designed to make library APIs easy on the eyes. It accomplishes this
via two language quirks:</p>
<ol>
<li><strong>Functions with zero arguments may be invoked without a trailing <code>()</code></strong><br />
This allows functions to behave like properties, encapsulating complexity the
same way getters do in other languages.
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn forty_two() -&gt; int { 42 }

fn ten(to_the_power_of = 1.0) -&gt; int { (10 ** to_the_power_of).round() }

print(forty_two * ten) // Prints "420"
<span class="boring">}</span></code></pre></pre>
</li>
<li><strong>Functions can have a special parameter <code>block</code> of type <code>fn() -&gt; T</code> that
adds aesthetically pleasing syntax sugar</strong>\
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn foo(a: string, block: fn() -&gt; string) -&gt; string {
  "a $block"
}

foo("hello") {
  foo("darkness") {
     "my old friend"
  }
}
<span class="boring">}</span></code></pre></pre>
</li>
</ol>
<h3 id="2-function-parameters-must-be-explicitly-labeled"><a class="header" href="#2-function-parameters-must-be-explicitly-labeled">2+ function parameters must be explicitly labeled</a></h3>
<p>Denim requires that parameters are labeled when 2 or more parameters are
included in a function invocation.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add(a: int, b = 0) -&gt; int {
  a + b
}

add(1) // compiles

add(1, 2)       // does not compile
add(a: 1, b: 2) // compiles
<span class="boring">}</span></code></pre></pre>
<p>When all you need is positional arguments, consider a tuple or array.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add(nums: (int, int?)) -&gt; int {
  nums.0 + (nums.1 ?? 0)
}

add((1, 2)) // compiles
<span class="boring">}</span></code></pre></pre>
<h2 id="medium-takes"><a class="header" href="#medium-takes">Medium Takes</a></h2>
<h3 id="imports-at-the-bottom-of-the-file"><a class="header" href="#imports-at-the-bottom-of-the-file">Imports at the bottom of the file</a></h3>
<p>This is normal:</p>
<pre><code>import stuff up here

yada yada yada

maybe some exports

mhm yeah

**finally** the stuff you came here to read
</code></pre>
<p>Denim puts imports and exports a the bottom of the file <em>after</em> the logic and
stuff.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub type ImportantStuff = struct {
  // ...
};

---
from "github.com/some/lib" use something;

from "~/internal/lib" show something_else;

<span class="boring">}</span></code></pre></pre>
<h3 id="no--or--comparison-operators"><a class="header" href="#no--or--comparison-operators">No <code>&gt;</code> or <code>&gt;=</code> comparison operators</a></h3>
<p>Why use <code>&gt;</code> or <code>&gt;=</code> when <code>&lt;</code> and <code>&lt;=</code> do trick?</p>
<h3 id="no-bitwise-operators-whatsoever"><a class="header" href="#no-bitwise-operators-whatsoever">No bitwise operators whatsoever</a></h3>
<p>Denim does not have bitwise and, or, zor, and not. Why? Most logic doesn't use
these operators. Logic that needs to do bitwise math should use good ol'
fashioned functions. Good riddance.</p>
<h3 id="and-and-or-instead-of--and-"><a class="header" href="#and-and-or-instead-of--and-"><code>and</code> and <code>or</code> instead of <code>&amp;&amp;</code> and <code>||</code></a></h3>
<p>Pretty much only Python does this, but I think it reads nicely and reduces
parsing ambiguity (<code>||</code> could be the beginning of a lambda).</p>
<h3 id="everything-is-an-expression"><a class="header" href="#everything-is-an-expression">Everything is an expression</a></h3>
<p>Like in Rust, most things in Denim are expressions. This means they yield a
value. <code>;</code> is used to turn an expression into statement. The value of a
statement is ignored.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>print(if value &gt; 8 { "pretty big" } else { "not that big" });
<span class="boring">}</span></code></pre></pre>
<h3 id="spaces-instead-of-tabs"><a class="header" href="#spaces-instead-of-tabs">Spaces instead of tabs</a></h3>
<p>Yeah. 2 space indent. Deal with it 😎.</p>
<h2 id="cold-takes"><a class="header" href="#cold-takes">Cold Takes</a></h2>
<h3 id="rust-style-enum"><a class="header" href="#rust-style-enum">Rust-style <code>enum</code></a></h3>
<p>Denim steals Rust's enums because they are super expressive while remaining
practical and readable.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Take {
  Hot { is_outta_pocket: bool },
  Medium,
  Cold(temp: f32),
}
<span class="boring">}</span></code></pre></pre>
<h3 id="rust-style-pattern-matching"><a class="header" href="#rust-style-pattern-matching">Rust-style pattern matching</a></h3>
<p>Denim steals Rust's pattern matching because it gets a lot right.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match number {
  // Match a single value.
  1 =&gt; print("One!"),
  // Match several values.
  2 | 3 | 5 | 7 | 11 =&gt; print("This is a prime"),
  // Match an inclusive range.
  13..=19 =&gt; print("A teen"),
  // Handle the rest of cases.
  _ =&gt; print("Ain't special"),
}

// Match is an expression too
let binary = match boolean {
  // The arms of a match must cover all the possible values
  false =&gt; 0,
  true =&gt; 1,
};
<span class="boring">}</span></code></pre></pre>
<p>The only thing it was missing is being able to eaily match a single arm in a if
statement:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if thing is Some::EnumVariant {
  print("Bingo!");
}
<span class="boring">}</span></code></pre></pre>
<h3 id="dart-style-string-syntax"><a class="header" href="#dart-style-string-syntax">Dart-style string syntax</a></h3>
<p>Dart makes declaring, concatenating, and interpolating values within strings
super easy. Denim steals (most) of this syntax. A notable exception Denim string
literals use <code>"</code> instead of <code>'</code>.</p>
<pre><code class="language-dart">let abc = "123""xyz" // concat just by putting literals next to each other.
let multiline = """
  take
    all
      the
        space
          you
            need
""";

let a = 1;
let b = 2;

let c = "$a + $b = ${a = b}" // Use `$` for string interpolation!
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../journal/2024_08_07_redesign.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../journal/2022_06_08_tour.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../journal/2024_08_07_redesign.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../journal/2022_06_08_tour.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
